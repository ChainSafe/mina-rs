// Copyright 2020 ChainSafe Systems
// SPDX-License-Identifier: Apache-2.0

#[cfg(all(test, feature = "browser"))]
wasm_bindgen_test::wasm_bindgen_test_configure!(run_in_browser);

use bin_prot::from_reader;
use mina_serialization_types::v1::*;
use wasm_bindgen_test::*;

const ACCOUNT_BYTE_EXAMPLES: &[&[u8]] = &[
    &[
        1, 1, 1, 1, 1, 1, 177, 63, 90, 166, 173, 124, 98, 72, 60, 89, 250, 36, 135, 129, 70, 43, 220,
        220, 252, 37, 84, 12, 158, 57, 33, 162, 137, 244, 135, 244, 18, 7, 0, 1, 1, 1, 1, 1, 1, 0, 1,
        1, 1, 252, 0, 122, 84, 142, 78, 9, 0, 0, 1, 1, 0, 1, 11, 20, 60, 6, 69, 73, 122, 89, 135, 167,
        184, 143, 102, 52, 14, 3, 219, 148, 63, 10, 13, 244, 139, 105, 163, 168, 41, 33, 206, 151, 177,
        10, 1, 1, 1, 178, 63, 90, 166, 173, 124, 98, 72, 60, 89, 250, 36, 135, 129, 70, 43, 220, 220,
        252, 37, 84, 12, 158, 57, 33, 162, 137, 244, 135, 244, 18, 7, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 252, 0,
        122, 84, 142, 78, 9, 0, 0, 1, 1, 253, 128, 81, 1, 0, 1, 1, 252, 0, 122, 84, 142, 78, 9, 0, 0,
        1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 3, 1, 3, 1, 0, 1, 3, 1, 3, 1, 3, 0,
    ],
    &[
        1, 1, 1, 1, 1, 1, 15, 72, 198, 91, 210, 95, 133, 243, 228, 234, 78, 254, 190, 183, 91, 121,
        123, 215, 67, 96, 59, 224, 75, 78, 173, 132, 86, 152, 183, 107, 211, 49, 0, 1, 1, 1, 1, 1, 1,
        0, 1, 1, 1, 254, 232, 3, 1, 1, 0, 1, 11, 20, 60, 6, 69, 73, 122, 89, 135, 167, 184, 143, 102,
        52, 14, 3, 219, 148, 63, 10, 13, 244, 139, 105, 163, 168, 41, 33, 206, 151, 177, 10, 1, 1, 1,
        15, 72, 198, 91, 210, 95, 133, 243, 228, 234, 78, 254, 190, 183, 91, 121, 123, 215, 67, 96, 59,
        224, 75, 78, 173, 132, 86, 152, 183, 107, 211, 49, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 3, 1, 3, 1, 0, 1,
        3, 1, 3, 1, 3, 0,
    ]
];

#[test]
#[wasm_bindgen_test]
fn smoke_test_account_deserialization() {
    for account_bytes in ACCOUNT_BYTE_EXAMPLES {
        let _acc: AccountV1 = from_reader(*account_bytes).unwrap();
    }
}
